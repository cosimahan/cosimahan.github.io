<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>拿单片机做了个表 | Cosimahan&#39;s</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="共使用6个按键、12位共阳数码管、4LED灯加一有源头蜂鸣器，按键占用一组I/O口，数码管、LED灯与蜂鸣器公用三组IO口。
代码如下
main.c
#include&amp;lt;reg52.h&amp;gt;
#include&amp;lt;ch1.h&amp;gt;
#define uint unsigned int
#define uchar unsigned char
#define Pa P0//1-8
#defin">
<meta property="og:type" content="article">
<meta property="og:title" content="拿单片机做了个表">
<meta property="og:url" content="http://cosimahan.github.io/e6-8b-bf-e5-8d-95-e7-89-87-e6-9c-ba-e5-81-9a-e4-ba-86-e4-b8-aa-e8-a1-a8">
<meta property="og:site_name" content="Cosimahan's">
<meta property="og:description" content="共使用6个按键、12位共阳数码管、4LED灯加一有源头蜂鸣器，按键占用一组I/O口，数码管、LED灯与蜂鸣器公用三组IO口。
代码如下
main.c
#include&amp;lt;reg52.h&amp;gt;
#include&amp;lt;ch1.h&amp;gt;
#define uint unsigned int
#define uchar unsigned char
#define Pa P0//1-8
#defin">
<meta property="og:updated_time" content="2015-07-30T08:05:24.314Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="拿单片机做了个表">
<meta name="twitter:description" content="共使用6个按键、12位共阳数码管、4LED灯加一有源头蜂鸣器，按键占用一组I/O口，数码管、LED灯与蜂鸣器公用三组IO口。
代码如下
main.c
#include&amp;lt;reg52.h&amp;gt;
#include&amp;lt;ch1.h&amp;gt;
#define uint unsigned int
#define uchar unsigned char
#define Pa P0//1-8
#defin">
  
    <link rel="alternative" href="/atom.xml" title="Cosimahan&#39;s" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Cosimahan&#39;s</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">择高处立，就平处坐，向宽出行</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://cosimahan.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-e6-8b-bf-e5-8d-95-e7-89-87-e6-9c-ba-e5-81-9a-e4-ba-86-e4-b8-aa-e8-a1-a8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/e6-8b-bf-e5-8d-95-e7-89-87-e6-9c-ba-e5-81-9a-e4-ba-86-e4-b8-aa-e8-a1-a8" class="article-date">
  <time datetime="2015-07-06T03:50:24.000Z" itemprop="datePublished">2015-07-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      拿单片机做了个表
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>共使用6个按键、12位共阳数码管、4LED灯加一有源头蜂鸣器，按键占用一组I/O口，数码管、LED灯与蜂鸣器公用三组IO口。</p>
<p>代码如下</p>
<p>main.c</p>
<p><pre class="lang:c decode:true" title="main.c">#include&lt;reg52.h&gt;</pre></p>
<p>#include&lt;ch1.h&gt;</p>
<p>#define uint unsigned int</p>
<p>#define uchar unsigned char</p>
<p>#define Pa P0//1-8</p>
<p>#define Pb P3//tx,rx,6keys</p>
<p>#define Pc P2//a-h</p>
<p>#define Pd P1//9-12,led,beep..</p>
<p>sbit bk0=Pb^0;sbit bk1=Pb^1;sbit bk2=Pb^2;sbit bk3=Pb^3;sbit bk4=Pb^4;sbit bk5=Pb^5;sbit bk6=Pb^6;sbit bk7=Pb^7;//bk:Pb’s Keys<br>sbit led=Pd^4;sbit beep=Pd^5;<br>uint i,t,p,num0=0,sec=0,minu=0,hour=0,day=1,mon=1,year=2015,num[12]={0},k=0,kl=0,s=0,ii=0,in[7]={0};<br>xdata uint ahour=18,aminu=0,ring=0,alarm=0,ka=0;<br>code uint map[]={0xC0,0xF9,0xA4,0xB0,0x99,0x92,0x82,0xF8,0x80,0x98,0xBF,0xFF,0xA3,0xAB,0x8E},dm[13]={0,31,28,31,30,31,30,31,31,30,31,30,31};//map:0123456789-(null)onf</p>
<p>uint md(){<br>    /<em><br>                                if(mon==1||mon==3||mon==5||mon==7||mon==8||mon==10||mon==12)return(31);<br>                                else if(mon==4||mon==6||mon==9||mon==11)return(30);<br>                                         else if(mon==2&amp;&amp;year%4==0&amp;&amp;(year%100!=0||year%400==0))return(29);<br>                                                    else return(28);
    </em>/</p>
<pre><code><span class="keyword">if</span>(mon==<span class="number">2</span>&amp;amp;&amp;amp;year%<span class="number">4</span>==<span class="number">0</span>&amp;amp;&amp;amp;(year%<span class="number">100</span>!=<span class="number">0</span>||year%<span class="number">400</span>==<span class="number">0</span>)){<span class="keyword">return</span>(<span class="number">29</span>);}
<span class="keyword">else</span> <span class="keyword">return</span>(dm[mon]);
</code></pre><p>}<br>void st(uint x){</p>
<pre><code>/<span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span>
            <span class="constant">SBUF=</span>x;
            <span class="keyword">while</span>(!<span class="constant">TI)</span>  ;  
    <span class="constant">TI=</span><span class="number">0</span>;  
    delay(<span class="number">10</span>); 
</code></pre><p>}</p>
<p>void main(){<br>     TH0=(65536-10000)/256;<br>     TL0=(65536-10000)%256;<br>     EA=1;<br>     ET0=1;<br>     TR0=1;</p>
<pre><code> TMOD=<span class="number">0x21</span>;

    SCON = <span class="number">0x50</span>;   
TH1 = <span class="number">0xFD</span>;  
TL1 = <span class="number">0xFD</span>;  
TR1 = <span class="number">1</span>;                          
ES  = <span class="number">1</span>;

i=<span class="number">9</span>;
Pa=Pd=Pc=<span class="number">0x00</span>;
delay(<span class="number">500</span>);<span class="keyword">while</span>(bk5==<span class="number">0</span>);ka=<span class="number">0</span>;
Pa=Pd=Pc=<span class="number">0xFF</span>;

<span class="keyword">while</span>(i++){
    delay(<span class="number">20</span>);
    <span class="comment">//Pb=0x00;//Pb=Pb*0x10;</span>
    <span class="keyword">if</span>(i&amp;gt;<span class="number">0x7FF</span>)i=<span class="number">9</span>;
    t=i%<span class="number">12</span>;p=<span class="number">0x01</span>;
    <span class="keyword">while</span>(t--){
        p*=<span class="number">2</span>;
    }
    Pc=<span class="number">0xFF</span>;<span class="comment">//0</span>
    <span class="keyword">if</span>(p&amp;lt;<span class="number">0xFF</span>){
        Pa=<span class="number">0xFF</span>-p;
        Pd=<span class="number">0xFF</span>;
        <span class="keyword">if</span>(ring&amp;amp;&amp;amp;num0/<span class="number">2</span>%<span class="number">2</span>&amp;amp;&amp;amp;num0&amp;gt;<span class="number">3</span>)beep=<span class="number">0</span>;
        <span class="keyword">if</span>(k==<span class="number">0</span>){
            <span class="keyword">if</span>(ka==<span class="number">1</span>)led=<span class="number">0</span>;
            <span class="keyword">else</span> <span class="keyword">if</span>(num0/<span class="number">5</span>%<span class="number">2</span>){

                    led=<span class="number">0</span>;

            }
        }

    }
    <span class="keyword">else</span> {
        Pa=<span class="number">0xFF</span>;Pd=<span class="number">0xFF</span>-p/<span class="number">0x100</span>;
        <span class="keyword">if</span>(ring&amp;amp;&amp;amp;num0/<span class="number">2</span>%<span class="number">2</span>&amp;amp;&amp;amp;num0&amp;gt;<span class="number">3</span>)beep=<span class="number">0</span>;
        <span class="keyword">if</span>(k==<span class="number">0</span>){
            <span class="keyword">if</span>(ka==<span class="number">1</span>)led=<span class="number">0</span>;
            <span class="keyword">else</span> <span class="keyword">if</span>(num0/<span class="number">5</span>%<span class="number">2</span>){

                    led=<span class="number">0</span>;

            }
        }
    <span class="comment">//    if(num0/5%2&amp;amp;&amp;amp;k==0){</span>

    <span class="comment">//            Pd-=0x10;</span>

    <span class="comment">//    }</span>
    }

            Pc=<span class="built_in">map</span>[num[(i)%<span class="number">12</span>]];
    <span class="comment">/*//
        switch(num[(i)%12]){
            case 0:Pc=0xC0;break;
            case 1:Pc=0xF9;break;
            case 2:Pc=0xA4;break;
            case 3:Pc=0xB0;break;
            case 4:Pc=0x99;break;
            case 5:Pc=0x92;break;
            case 6:Pc=0x82;break;
            case 7:Pc=0xF8;break;
            case 8:Pc=0x80;break;
            case 9:Pc=0x98;break;
            case 10:Pc=0xBF;break;
            case 11:Pc=0xFF;break;

        }
        */</span><span class="comment">//</span>
        <span class="keyword">if</span>(in[<span class="number">6</span>]==<span class="number">1</span>){
            in[<span class="number">6</span>]=<span class="number">0</span>;
            year=in[<span class="number">0</span>];
            mon=in[<span class="number">1</span>];
            day=in[<span class="number">2</span>];
            hour=in[<span class="number">3</span>];
            minu=in[<span class="number">4</span>];
            sec=in[<span class="number">5</span>];

        }
        <span class="keyword">if</span>(in[<span class="number">6</span>]==<span class="number">2</span>){
          in[<span class="number">6</span>]=<span class="number">0</span>;
            st(year);
            st(mon);
            st(day);
            st(hour);
            st(minu);
            st(sec);
            st(<span class="number">1</span>);
        }
        <span class="comment">//</span>
        <span class="keyword">if</span>(k){
                num[<span class="number">0</span>]=year/<span class="number">1000</span>;<span class="comment">//k;//</span>
                num[<span class="number">1</span>]=year/<span class="number">100</span>%<span class="number">10</span>;<span class="comment">//s;//</span>
                num[<span class="number">2</span>]=year/<span class="number">10</span>%<span class="number">10</span>;<span class="comment">//kl;//</span>
                num[<span class="number">3</span>]=year%<span class="number">10</span>;
                num[<span class="number">4</span>]=<span class="number">10</span>;
                num[<span class="number">5</span>]=mon/<span class="number">10</span>;
                num[<span class="number">6</span>]=mon%<span class="number">10</span>;
                num[<span class="number">7</span>]=<span class="number">10</span>;
                num[<span class="number">8</span>]=day/<span class="number">10</span>;
                num[<span class="number">9</span>]=day%<span class="number">10</span>;
                num[<span class="number">10</span>]=<span class="number">11</span>;
                num[<span class="number">11</span>]=<span class="number">11</span>;

            <span class="keyword">if</span>(num0/<span class="number">5</span>%<span class="number">2</span>&amp;amp;&amp;amp;s!=<span class="number">0</span>){

                <span class="comment">//if(){</span>

                    <span class="keyword">if</span>(s==<span class="number">1</span>)num[<span class="number">0</span>]=num[<span class="number">1</span>]=num[<span class="number">2</span>]=num[<span class="number">3</span>]=<span class="number">11</span>;
                    <span class="keyword">if</span>(s==<span class="number">2</span>)num[<span class="number">5</span>]=num[<span class="number">6</span>]=<span class="number">11</span>;
                    <span class="keyword">if</span>(s==<span class="number">3</span>)num[<span class="number">8</span>]=num[<span class="number">9</span>]=<span class="number">11</span>;
            <span class="comment">//    }</span>

            }

        }

        <span class="keyword">else</span>{
            <span class="keyword">if</span>(ka==<span class="number">0</span>){
                num[<span class="number">0</span>]=<span class="number">11</span>;<span class="comment">//beep;//Pb/100;//k;//</span>
                num[<span class="number">1</span>]=hour/<span class="number">10</span>;<span class="comment">//Pb/10%10;//s;//</span>
                num[<span class="number">2</span>]=hour%<span class="number">10</span>;<span class="comment">//Pb%10;//kl;//</span>
                num[<span class="number">3</span>]=<span class="number">11</span>;<span class="comment">//led;//</span>
                num[<span class="number">4</span>]=<span class="number">11</span>;
                num[<span class="number">5</span>]=minu/<span class="number">10</span>;<span class="comment">//Pd/100;//</span>
                num[<span class="number">6</span>]=minu%<span class="number">10</span>;<span class="comment">//Pd/10%10;//</span>
                num[<span class="number">7</span>]=<span class="number">11</span>;<span class="comment">//Pd%10;//</span>
                num[<span class="number">8</span>]=<span class="number">11</span>;
                num[<span class="number">9</span>]=sec/<span class="number">10</span>;
                num[<span class="number">10</span>]=sec%<span class="number">10</span>;
                num[<span class="number">11</span>]=<span class="number">11</span>;

                <span class="keyword">if</span>(num0/<span class="number">5</span>%<span class="number">2</span>&amp;amp;&amp;amp;s!=<span class="number">0</span>){

                <span class="comment">//    if(){</span>
                        <span class="keyword">if</span>(s==<span class="number">1</span>)num[<span class="number">1</span>]=num[<span class="number">2</span>]=<span class="number">11</span>;
                        <span class="keyword">if</span>(s==<span class="number">2</span>)num[<span class="number">5</span>]=num[<span class="number">6</span>]=<span class="number">11</span>;
                        <span class="keyword">if</span>(s==<span class="number">3</span>)num[<span class="number">9</span>]=num[<span class="number">10</span>]=<span class="number">11</span>;
                <span class="comment">//    }</span>

                    }
            }
            <span class="keyword">else</span>{
                num[<span class="number">0</span>]=<span class="number">11</span>;<span class="comment">//k;//Pb/100;//</span>
                num[<span class="number">1</span>]=ahour/<span class="number">10</span>;<span class="comment">//s;//Pb/10%10;//</span>
                num[<span class="number">2</span>]=ahour%<span class="number">10</span>;<span class="comment">//kl;//Pb%10;//</span>
                num[<span class="number">3</span>]=<span class="number">11</span>;
                num[<span class="number">4</span>]=<span class="number">11</span>;
                num[<span class="number">5</span>]=aminu/<span class="number">10</span>;
                num[<span class="number">6</span>]=aminu%<span class="number">10</span>;
                num[<span class="number">7</span>]=<span class="number">11</span>;
                num[<span class="number">8</span>]=<span class="number">11</span>;
                <span class="keyword">if</span>(alarm){
                    num[<span class="number">9</span>]=<span class="number">12</span>;
                    num[<span class="number">10</span>]=<span class="number">13</span>;
                    num[<span class="number">11</span>]=<span class="number">11</span>;
                }
                <span class="keyword">else</span>{
                    num[<span class="number">9</span>]=<span class="number">12</span>;
                    num[<span class="number">10</span>]=<span class="number">14</span>;
                    num[<span class="number">11</span>]=<span class="number">14</span>;
                }

                <span class="keyword">if</span>(num0/<span class="number">5</span>%<span class="number">2</span>&amp;amp;&amp;amp;s!=<span class="number">0</span>){
                    <span class="keyword">if</span>(s==<span class="number">1</span>)num[<span class="number">1</span>]=num[<span class="number">2</span>]=<span class="number">11</span>;
                    <span class="keyword">if</span>(s==<span class="number">2</span>)num[<span class="number">5</span>]=num[<span class="number">6</span>]=<span class="number">11</span>;

                }
            }

        }

        <span class="comment">//alarm----</span>
        <span class="keyword">if</span>(alarm==<span class="number">1</span>){
            <span class="keyword">if</span>(hour==ahour&amp;amp;&amp;amp;minu==aminu&amp;amp;&amp;amp;sec==<span class="number">0</span>)ring=<span class="number">1</span>;
            <span class="keyword">if</span>(minu-aminu&amp;gt;=<span class="number">10</span>&amp;amp;&amp;amp;minu-aminu&amp;lt;=<span class="number">65505</span>) ring=<span class="number">0</span>;
        }
        <span class="keyword">else</span> ring=<span class="number">0</span>;

}
</code></pre><p>}<br>void time0() interrupt 1{    //1s<br>  TH0=(65536-50000)/256;<br>   TL0=(65536-50000)%256;<br>   num0++;<br>   if(num0==20){<br>     num0=0;<br>       sec++;</p>
<pre><code>        <span class="keyword">if</span>(sec==<span class="number">60</span>){
            sec=<span class="number">0</span>;minu++;
            <span class="keyword">if</span>(minu==<span class="number">60</span>){
                minu=<span class="number">0</span>;hour++;
                <span class="keyword">if</span>(hour==<span class="number">24</span>){
                    hour=<span class="number">0</span>;day++;
                    <span class="keyword">if</span>(day&amp;gt;md()){
                        day=<span class="number">1</span>;mon++;
                        <span class="keyword">if</span>(mon==<span class="number">13</span>){
                            mon=<span class="number">1</span>;year++;
                            <span class="keyword">if</span>(year&amp;gt;=<span class="number">10000</span>){
                                year=<span class="number">0</span>;
                            }
                        }
                    }
                }
            }
        }
    }

    <span class="comment">//key----</span>

    <span class="keyword">if</span>(Pb==<span class="number">0xFF</span>||Pb==<span class="number">0xFF</span>-<span class="number">0x04</span>||Pb==<span class="number">0xFF</span>-<span class="number">0x08</span>||Pb==<span class="number">0xFF</span>-<span class="number">0x04</span>-<span class="number">0x08</span>){
        delay(<span class="number">1</span>);
        <span class="keyword">if</span>(Pb==<span class="number">0xFF</span>||Pb==<span class="number">0xFF</span>-<span class="number">0x04</span>||Pb==<span class="number">0xFF</span>-<span class="number">0x08</span>||Pb==<span class="number">0xFF</span>-<span class="number">0x04</span>-<span class="number">0x08</span>){
            kl=<span class="number">0</span>;
            <span class="keyword">if</span>(s==<span class="number">0</span>){
                <span class="keyword">if</span>(bk2==<span class="number">0</span>){
                    k=<span class="number">1</span>;
                }
                <span class="keyword">else</span> k=<span class="number">0</span>;
            }
            <span class="keyword">if</span>(bk3==<span class="number">0</span>){
                alarm=<span class="number">1</span>;
            }
            <span class="keyword">else</span> alarm=<span class="number">0</span>;
        }
    }
<span class="comment">/*    if(Pb==0xFF-0x04&amp;amp;&amp;amp;kl==0&amp;amp;&amp;amp;s==0){
        delay(1);
        if(Pb==0xFF-0x04){
            kl=1;
            k=k==0?1:0;
        }
    }*/</span>

    <span class="comment">//</span>

    <span class="keyword">if</span>(bk7==<span class="number">0</span>&amp;amp;&amp;amp;kl==<span class="number">0</span>){
        delay(<span class="number">1</span>);
        <span class="keyword">if</span>(bk7==<span class="number">0</span>){
            kl=<span class="number">1</span>;
          s=((s==<span class="number">0</span>)?<span class="number">1</span>:((s==<span class="number">1</span>)?<span class="number">2</span>:((s==<span class="number">2</span>)&amp;amp;&amp;amp;(k==<span class="number">1</span>)?<span class="number">3</span>:<span class="number">0</span>)));
            <span class="comment">/*
            if(s==0)s=1;
            else if(s==1)s=2;
            else if(s==2&amp;amp;&amp;amp;k==1)s=3;
            else s=0;
            */</span>
        }
    }
    <span class="keyword">if</span>(bk5==<span class="number">0</span>&amp;amp;&amp;amp;kl==<span class="number">0</span>){
        delay(<span class="number">1</span>);
        <span class="keyword">if</span>(bk5==<span class="number">0</span>){
            kl=<span class="number">1</span>;
            <span class="keyword">if</span>(s==<span class="number">0</span>)ka=((ka==<span class="number">0</span>)?<span class="number">1</span>:<span class="number">0</span>);
            <span class="comment">/*
            if(s==0)s=1;
            else if(s==1)s=2;
            else if(s==2&amp;amp;&amp;amp;k==1)s=3;
            else s=0;
            */</span>
        }
    }
    <span class="comment">//</span>
    <span class="keyword">if</span>((bk4==<span class="number">0</span>||bk6==<span class="number">0</span>)&amp;amp;&amp;amp;kl==<span class="number">0</span>&amp;amp;&amp;amp;s!=<span class="number">0</span>){
        delay(<span class="number">1</span>);
        <span class="keyword">if</span>(bk4==<span class="number">0</span>||bk6==<span class="number">0</span>){
            kl=<span class="number">1</span>;
            <span class="keyword">if</span>(k){
                <span class="keyword">if</span>(s==<span class="number">1</span>){

                    <span class="keyword">if</span>(bk4==<span class="number">0</span>&amp;amp;&amp;amp;year&amp;lt;<span class="number">9999</span>)year++;
                    <span class="keyword">if</span>(bk6==<span class="number">0</span>&amp;amp;&amp;amp;year&amp;gt;<span class="number">0</span>) year--;

                }
                <span class="keyword">if</span>(s==<span class="number">2</span>){
                    <span class="keyword">if</span>(bk4==<span class="number">0</span>)mon++;
                    <span class="keyword">else</span> mon--;
                    <span class="keyword">if</span>(mon&amp;lt;<span class="number">1</span>)mon=<span class="number">12</span>;
                    <span class="keyword">if</span>(mon&amp;gt;<span class="number">12</span>)mon=<span class="number">1</span>;
                }
                <span class="keyword">if</span>(s==<span class="number">3</span>){
                    <span class="keyword">if</span>(bk4==<span class="number">0</span>){day++;}
</code></pre><p>//                            if(((day&lt;31)&amp;&amp;(mon==1||mon==3||mon==5||mon==7||mon==8||mon==10||mon==12))||((day&lt;30)&amp;&amp;(mon==4||mon==6||mon==9||mon==11))||(((day&lt;29)&amp;&amp;(mon==2&amp;&amp;year%4==0&amp;&amp;(year%100!=0||year%400==0))))||((day&lt;28)&amp;&amp;(mon==2)));<br>//                            else day=0;<br>                            if(day&gt;md())day=1;<br>                            if(bk6==0)day–;<br>                            if(day&lt;1){day=md();<br>//                                if(mon==1||mon==3||mon==5||mon==7||mon==8||mon==10||mon==12)day=31;<br>//                                else if(mon==4||mon==6||mon==9||mon==11)day=30;<br>//                                   else if(mon==2&amp;&amp;year%4==0&amp;&amp;(year%100!=0||year%400==0))day=29;<br>//                                                    else day=28;////</p>
<pre><code>                       }

                       <span class="comment">/*if(day&amp;lt;1){
                           if(mon==2){
                               if(year%4!=0){
                                   day=28;

                               }
                               if(year%100==0&amp;amp;&amp;amp;year%400!=0){
                                   day=28;
                               }
                               else day=29;
                           }
                           if(mon==2||mon==4||mon==6||mon==9||mon==11)day=30;
                           else day=31;
                       }
                   }
                       if(day&amp;gt;=29){
                           if(day==29&amp;amp;&amp;amp;mon==2&amp;amp;&amp;amp;(year%4!=0||(year%100==0&amp;amp;&amp;amp;year%400!=0))){
                               day=0;
                           }
                           if(day==30&amp;amp;&amp;amp;mon==2){
                               day=0;
                           }
                           if((day==31&amp;amp;&amp;amp;(mon==2||mon==4||mon==6||mon==9||mon==11))||day==32){
                               day=0;
                           }
                   }*/</span>
               }    
           }
               <span class="keyword">else</span>{
                   <span class="keyword">if</span>(ka==<span class="number">0</span>){
                           <span class="keyword">if</span>(s==<span class="number">1</span>){

                               <span class="keyword">if</span>(bk4==<span class="number">0</span>)<span class="keyword">if</span>(hour&amp;lt;<span class="number">23</span>)hour++;<span class="keyword">else</span> hour=<span class="number">0</span>;
                               <span class="keyword">if</span>(bk6==<span class="number">0</span>)<span class="keyword">if</span>(hour&amp;gt;<span class="number">0</span>)hour--;<span class="keyword">else</span> hour=<span class="number">23</span>;

                           }
                           <span class="keyword">if</span>(s==<span class="number">2</span>){
                               <span class="keyword">if</span>(bk4==<span class="number">0</span>)<span class="keyword">if</span>(minu&amp;lt;<span class="number">59</span>)minu++;<span class="keyword">else</span> minu=<span class="number">0</span>;
                               <span class="keyword">if</span>(bk6==<span class="number">0</span>)<span class="keyword">if</span>(minu&amp;gt;<span class="number">0</span>) minu--;<span class="keyword">else</span> minu=<span class="number">59</span>;

                           sec=<span class="number">0</span>;
                       }
                   }
                   <span class="keyword">else</span>{
                       <span class="keyword">if</span>(s==<span class="number">1</span>){

                               <span class="keyword">if</span>(bk4==<span class="number">0</span>)<span class="keyword">if</span>(ahour&amp;lt;<span class="number">23</span>)ahour++;<span class="keyword">else</span> ahour=<span class="number">0</span>;
                               <span class="keyword">if</span>(bk6==<span class="number">0</span>)<span class="keyword">if</span>(ahour&amp;gt;<span class="number">0</span>)ahour--;<span class="keyword">else</span> ahour=<span class="number">23</span>;

                           }
                           <span class="keyword">if</span>(s==<span class="number">2</span>){
                               <span class="keyword">if</span>(bk4==<span class="number">0</span>)<span class="keyword">if</span>(aminu&amp;lt;<span class="number">59</span>)aminu++;<span class="keyword">else</span> aminu=<span class="number">0</span>;
                               <span class="keyword">if</span>(bk6==<span class="number">0</span>)<span class="keyword">if</span>(aminu&amp;gt;<span class="number">0</span>) aminu--;<span class="keyword">else</span> aminu=<span class="number">59</span>;

                   }

               }

       }    
   }    
    <span class="keyword">if</span>((Pb==<span class="number">0xFF</span>-<span class="number">0x10</span>||Pb==<span class="number">0xFF</span>-<span class="number">0x40</span>)&amp;amp;&amp;amp;kl==<span class="number">0</span>&amp;amp;&amp;amp;s==<span class="number">0</span>){
           delay(<span class="number">1</span>);
           <span class="keyword">if</span>(Pb==<span class="number">0xFF</span>-<span class="number">0x10</span>){
               kl=<span class="number">1</span>;
               in[<span class="number">6</span>]=<span class="number">2</span>;
           }
           <span class="keyword">if</span>(Pb==<span class="number">0xFF</span>-<span class="number">0x40</span>){
               kl=<span class="number">1</span>;ii=<span class="number">7</span>;
               <span class="keyword">while</span>(ii--)st(<span class="number">2</span>);
           }

    }

}
</code></pre><p>}</p>
<p>void ser() interrupt 4<br>{<br>      if(RI == 1) {<br>      RI = 0;     </p>
<pre><code>  in[ii] = SBUF<span class="comment">;</span>

}

    ii++<span class="comment">;</span>
    ii=ii==7?0:ii<span class="comment">;</span>
</code></pre><p>}<br><br>ch1.h</p>
<p><pre class="lang:c decode:true " title="ch1.h">#define uint unsigned int</pre></p>
<p>#define uchar unsigned char</p>
<p>void delay(uint z)<br>{<br>    uint zz;<br>    while(z–){zz=z;while(zz–);}</p>
<p>}<br>&nbsp;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cosimahan.github.io/e6-8b-bf-e5-8d-95-e7-89-87-e6-9c-ba-e5-81-9a-e4-ba-86-e4-b8-aa-e8-a1-a8" data-id="cicpyu3ng000ms06bnvjz88fb" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/hello-world" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Hello World
        
      </div>
    </a>
  
  
    <a href="/acm-e7-9c-81-e8-b5-9b-e6-89-93-e4-ba-86-e5-9d-97-e9-93-81-ef-bc-8c-e5-bf-83-e5-a1-9e-e5-a1-9e" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">ACM省赛打了块铁，心塞塞</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/未分类/">未分类</a><span class="category-list-count">17</span></li></ul>
    </div>
  </div>

  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/hello-world">Hello World</a>
          </li>
        
          <li>
            <a href="/e6-8b-bf-e5-8d-95-e7-89-87-e6-9c-ba-e5-81-9a-e4-ba-86-e4-b8-aa-e8-a1-a8">拿单片机做了个表</a>
          </li>
        
          <li>
            <a href="/acm-e7-9c-81-e8-b5-9b-e6-89-93-e4-ba-86-e5-9d-97-e9-93-81-ef-bc-8c-e5-bf-83-e5-a1-9e-e5-a1-9e">ACM省赛打了块铁，心塞塞</a>
          </li>
        
          <li>
            <a href="/e6-8a-8a-e5-9f-9f-e5-90-8d-e4-bb-8egodaddy-e8-bd-ac-e5-88-b0-e4-ba-86namesilo">把域名从 Godaddy 转到了 NameSilo</a>
          </li>
        
          <li>
            <a href="/e6-80-bb-e8-a7-89-e5-be-97-e8-af-a5-e5-81-9a-e7-82-b9-e4-bb-80-e4-b9-88">总觉得该做点什么</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 Cosima<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>